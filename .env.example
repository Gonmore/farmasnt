# farmaSNT production compose (.env)
# Format: KEY=value (no ':' and no quotes)

# ---- Backend ----
DATABASE_URL=postgresql://postgres:<PASSWORD_URLENCODED>@postgres-principal:5432/farmasnt?schema=public
PORT=6000
NODE_ENV=production

# Must be >= 16 chars
JWT_ACCESS_SECRET=change-me-change-me-change-me
JWT_REFRESH_SECRET=change-me-change-me-change-me

# CORS origin for browser app
WEB_ORIGIN=https://farmasnt.supernovatel.com

# Optional seed on boot (usually keep 0 in production)
RUN_SEED=0
SEED_TENANT_NAME=Demo Pharma
SEED_ADMIN_EMAIL=admin@demo.local
SEED_ADMIN_PASSWORD=
SEED_PLATFORM_DOMAIN=

# Optional SMTP
SMTP_HOST=
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=
SMTP_PASS=
SMTP_FROM=

# ---- Object storage (MinIO/S3) ----
# If you want product photos + tenant logos, set these.
# IMPORTANT (presigned uploads): S3_ENDPOINT MUST be reachable by the browser.
# In production, expose MinIO's S3 API (9000) behind a public subdomain, e.g. s3.supernovatel.com.
S3_ENDPOINT=https://s3.supernovatel.com
S3_REGION=us-east-1
S3_BUCKET=farmasnt-uploads
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin

# Must be publicly reachable by browsers (usually via nginx proxy)
# Example (subdomain): https://s3.supernovatel.com/farmasnt-uploads
S3_PUBLIC_BASE_URL=https://s3.supernovatel.com/farmasnt-uploads
S3_FORCE_PATH_STYLE=true

# ---- Prisma migration auto-resolve (use with care) ----
PRISMA_MIGRATE_RESOLVE_ON_FAIL=1
PRISMA_MIGRATE_RESOLVE_ACTION=rolled-back
PRISMA_MIGRATE_RESOLVE_NAMES=20260116063727_pagos

# ---- Frontend build args ----
# This is the API base URL used by the browser
VITE_API_BASE_URL=https://farmasnt.supernovatel.com
# Optional internal target used by nginx/preview setups
VITE_BACKEND_TARGET=http://backend-farmasnt:6000
